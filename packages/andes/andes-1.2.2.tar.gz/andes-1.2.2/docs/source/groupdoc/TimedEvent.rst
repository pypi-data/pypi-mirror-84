.. _TimedEvent:

================================================================================
TimedEvent
================================================================================
Timed event group

Common Parameters: u, name

Available models:
Toggler_,
Fault_

.. _Toggler:

--------------------------------------------------------------------------------
Toggler
--------------------------------------------------------------------------------

Group TimedEvent_


    Time-based connectivity status toggler.
    
Parameters

+--------+-----------+-----------------------------------------+---------+--------+------------+------------+
|  Name  |  Symbol   |               Description               | Default |  Unit  |    Type    | Properties |
+========+===========+=========================================+=========+========+============+============+
|  idx   |           | unique device idx                       |         |        | DataParam  |            |
+--------+-----------+-----------------------------------------+---------+--------+------------+------------+
|  u     | :math:`u` | connection status                       | 1       | *bool* | NumParam   |            |
+--------+-----------+-----------------------------------------+---------+--------+------------+------------+
|  name  |           | device name                             |         |        | DataParam  |            |
+--------+-----------+-----------------------------------------+---------+--------+------------+------------+
|  model |           | Model or Group of the device to control |         |        | DataParam  | mandatory  |
+--------+-----------+-----------------------------------------+---------+--------+------------+------------+
|  dev   |           | idx of the device to control            |         |        | IdxParam   | mandatory  |
+--------+-----------+-----------------------------------------+---------+--------+------------+------------+
|  t     |           | switch time for connection status       | -1      |        | TimerParam | mandatory  |
+--------+-----------+-----------------------------------------+---------+--------+------------+------------+

Services

+------+------------+-----------+--------------+
| Name |   Symbol   | Equation  |     Type     |
+======+============+===========+==============+
|  _u  | :math:`_u` | :math:`1` | ConstService |
+------+------------+-----------+--------------+


.. _Fault:

--------------------------------------------------------------------------------
Fault
--------------------------------------------------------------------------------

Group TimedEvent_


    Three-phase to ground fault.
    
Parameters

+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
| Name  |   Symbol    |              Description              | Default |    Unit     |    Type    | Properties |
+=======+=============+=======================================+=========+=============+============+============+
|  idx  |             | unique device idx                     |         |             | DataParam  |            |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
|  u    | :math:`u`   | connection status                     | 1       | *bool*      | NumParam   |            |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
|  name |             | device name                           |         |             | DataParam  |            |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
|  bus  |             | linked bus idx                        |         |             | IdxParam   | mandatory  |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
|  tf   |             | Bus fault start time                  | -1      | *second*    | TimerParam | mandatory  |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
|  tc   |             | Bus fault end time                    | -1      | *second*    | TimerParam |            |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
|  xf   | :math:`x_f` | Fault to ground impedance (positive)  | 0.000   | *p.u.(sys)* | NumParam   |            |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+
|  rf   | :math:`x_f` | Fault to ground resistance (positive) | 0       | *p.u.(sys)* | NumParam   |            |
+-------+-------------+---------------------------------------+---------+-------------+------------+------------+

Variables

+------+----------------+---------------+-----------------------+------------+------------+
| Name |     Symbol     | Initial Value |      Description      |    Unit    | Properties |
+======+================+===============+=======================+============+============+
|  a   | :math:`\theta` |               | Bus voltage angle     | *p.u.(kV)* |            |
+------+----------------+---------------+-----------------------+------------+------------+
|  v   | :math:`V`      |               | Bus voltage magnitude | *p.u.(kV)* |            |
+------+----------------+---------------+-----------------------+------------+------------+

Algebraic Equations

+------+----------------+----------+-------------------------------+
| Name |     Symbol     |   Type   | RHS of Equation "0 = g(x, y)" |
+======+================+==========+===============================+
|  a   | :math:`\theta` | ExtAlgeb | :math:`V^{2} g_{f} u u_{f}`   |
+------+----------------+----------+-------------------------------+
|  v   | :math:`V`      | ExtAlgeb | :math:`- V^{2} b_{f} u u_{f}` |
+------+----------------+----------+-------------------------------+

Services

+------+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------+
| Name |    Symbol     |                                                                                                                                            Equation                                                                                                                                             |     Type     |
+======+===============+=================================================================================================================================================================================================================================================================================================+==============+
|  gf  | :math:`g_{f}` | :math:`\frac{\operatorname{re}{\left(x_{f}\right)} - \operatorname{im}{\left(x_{f}\right)}}{\left(\operatorname{re}{\left(x_{f}\right)} - \operatorname{im}{\left(x_{f}\right)}\right)^{2} + \left(\operatorname{re}{\left(x_{f}\right)} + \operatorname{im}{\left(x_{f}\right)}\right)^{2}}`   | ConstService |
+------+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------+
|  bf  | :math:`b_{f}` | :math:`\frac{- \operatorname{re}{\left(x_{f}\right)} - \operatorname{im}{\left(x_{f}\right)}}{\left(\operatorname{re}{\left(x_{f}\right)} - \operatorname{im}{\left(x_{f}\right)}\right)^{2} + \left(\operatorname{re}{\left(x_{f}\right)} + \operatorname{im}{\left(x_{f}\right)}\right)^{2}}` | ConstService |
+------+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------+
|  uf  | :math:`u_f`   | :math:`0`                                                                                                                                                                                                                                                                                       | ConstService |
+------+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------+


Config Fields in [Fault]

+----------+--------+-------+-------------------------------------------------+-----------------+
|  Option  | Symbol | Value |                      Info                       | Accepted values |
+==========+========+=======+=================================================+=================+
|  restore |        | 1     | restore algebraic variables to pre-fault values | (0, 1)          |
+----------+--------+-------+-------------------------------------------------+-----------------+
|  scale   |        | 1     | scaling factor of restored algebraic values     |                 |
+----------+--------+-------+-------------------------------------------------+-----------------+


