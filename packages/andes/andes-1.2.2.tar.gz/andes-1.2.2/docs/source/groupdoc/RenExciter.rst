.. _RenExciter:

================================================================================
RenExciter
================================================================================

    Renewable electrical control (exciter) group.
    

Common Parameters: u, name, reg

Common Variables: Pref, Qref, wg, Pord

Available models:
REECA1_

.. _REECA1:

--------------------------------------------------------------------------------
REECA1
--------------------------------------------------------------------------------

Group RenExciter_


    Renewable energy electrical control.

    A message `RuntimeWarning: invalid value encountered in sqrt`
    may show up following a bus-to-ground fault.
    This warning can be safely ignored.
    
Parameters

+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Name   |      Symbol      |                                       Description                                        | Default |  Unit  |   Type    | Properties |
+=========+==================+==========================================================================================+=========+========+===========+============+
|  idx    |                  | unique device idx                                                                        |         |        | DataParam |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  u      | :math:`u`        | connection status                                                                        | 1       | *bool* | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  name   |                  | device name                                                                              |         |        | DataParam |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  reg    |                  | Renewable generator idx                                                                  |         |        | IdxParam  | mandatory  |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  busr   |                  | Optional remote bus for voltage control                                                  |         |        | IdxParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  PFFLAG |                  | Power factor control flag; 1-PF control, 0-Q control                                     |         | *bool* | NumParam  | mandatory  |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  VFLAG  |                  | Voltage control flag; 1-Q control, 0-V control                                           |         | *bool* | NumParam  | mandatory  |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  QFLAG  |                  | Q control flag; 1-V or Q control, 0-const. PF or Q                                       |         | *bool* | NumParam  | mandatory  |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  PFLAG  |                  | P speed-dependency flag; 1-has speed dep., 0-no dep.                                     |         | *bool* | NumParam  | mandatory  |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  PQFLAG |                  | P/Q priority flag for I limit; 0-Q priority, 1-P priority                                |         | *bool* | NumParam  | mandatory  |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vdip   | :math:`V_{dip}`  | Low V threshold to activate Iqinj logic                                                  | 0.800   | *p.u.* | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vup    | :math:`V_{up}`   | V threshold above which to activate Iqinj logic                                          | 1.200   | *p.u.* | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Trv    | :math:`T_{rv}`   | Voltage filter time constant                                                             | 0.020   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  dbd1   | :math:`d_{bd1}`  | Lower bound of the voltage deadband (<=0)                                                | -0.020  |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  dbd2   | :math:`d_{bd2}`  | Upper bound of the voltage deadband (>=0)                                                | 0.020   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Kqv    | :math:`K_{qv}`   | Gain to compute Iqinj from V error                                                       | 1       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Iqh1   | :math:`I_{qh1}`  | Upper limit on Iqinj                                                                     | 999     |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Iql1   | :math:`I_{ql1}`  | Lower limit on Iqinj                                                                     | -999    |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vref0  | :math:`V_{ref0}` | User defined Vref (if 0, use initial bus V)                                              | 1       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Iqfrz  | :math:`I_{qfrz}` | Value at which Iqinj is held for Thld (if >0) seconds following a Vdip                   | 0       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Thld   | :math:`T_{hld}`  | Time for which Iqinj is held. If >0, hold at Iqinj; if <0, hold at State 1 for abs(Thld) | 0       | *s*    | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Thld2  | :math:`T_{hld2}` | Time for which IPMAX is held after voltage dip ends                                      | 0       | *s*    | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Tp     | :math:`T_p`      | Filter time constant for Pe                                                              | 0.020   | *s*    | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  QMax   | :math:`Q_{max}`  | Upper limit for reactive power regulator                                                 | 999     |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  QMin   | :math:`Q_{min}`  | Lower limit for reactive power regulator                                                 | -999    |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  VMAX   | :math:`V_{max}`  | Upper limit for voltage control                                                          | 999     |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  VMIN   | :math:`V_{min}`  | Lower limit for voltage control                                                          | -999    |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Kqp    | :math:`K_{qp}`   | Proportional gain for reactive power error                                               | 1       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Kqi    | :math:`K_{qi}`   | Integral gain for reactive power error                                                   | 0.100   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Kvp    | :math:`K_{vp}`   | Proportional gain for voltage error                                                      | 1       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Kvi    | :math:`K_{vi}`   | Integral gain for voltage error                                                          | 0.100   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vref1  | :math:`V_{ref1}` | Voltage ref. if VFLAG=0                                                                  | 1       |        | NumParam  | non_zero   |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Tiq    | :math:`T_{iq}`   | Filter time constant for Iq                                                              | 0.020   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  dPmax  | :math:`d_{Pmax}` | Power reference max. ramp rate (>0)                                                      | 999     |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  dPmin  | :math:`d_{Pin}`  | Power reference min. ramp rate (<0)                                                      | -999    |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  PMAX   | :math:`P_{max}`  | Max. active power limit > 0                                                              | 999     |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  PMIN   | :math:`P_{min}`  | Min. active power limit                                                                  | 0       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Imax   | :math:`I_{max}`  | Max. apparent current limit                                                              | 999     |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Tpord  | :math:`T_{pord}` | Filter time constant for power setpoint                                                  | 0.020   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vq1    | :math:`V_{q1}`   | Reactive power V-I pair (point 1), voltage                                               | 0.200   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Iq1    | :math:`I_{q1}`   | Reactive power V-I pair (point 1), current                                               | 2       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vq2    | :math:`V_{q2}`   | Reactive power V-I pair (point 2), voltage                                               | 0.400   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Iq2    | :math:`I_{q2}`   | Reactive power V-I pair (point 2), current                                               | 4       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vq3    | :math:`V_{q3}`   | Reactive power V-I pair (point 3), voltage                                               | 0.800   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Iq3    | :math:`I_{q3}`   | Reactive power V-I pair (point 3), current                                               | 8       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vq4    | :math:`V_{q4}`   | Reactive power V-I pair (point 4), voltage                                               | 1       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Iq4    | :math:`I_{q4}`   | Reactive power V-I pair (point 4), current                                               | 10      |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vp1    | :math:`V_{p1}`   | Active power V-I pair (point 1), voltage                                                 | 0.200   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Ip1    | :math:`I_{p1}`   | Active power V-I pair (point 1), current                                                 | 2       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vp2    | :math:`V_{p2}`   | Active power V-I pair (point 2), voltage                                                 | 0.400   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Ip2    | :math:`I_{p2}`   | Active power V-I pair (point 2), current                                                 | 4       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vp3    | :math:`V_{p3}`   | Active power V-I pair (point 3), voltage                                                 | 0.800   |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Ip3    | :math:`I_{p3}`   | Active power V-I pair (point 3), current                                                 | 8       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Vp4    | :math:`V_{p4}`   | Active power V-I pair (point 4), voltage                                                 | 1       |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  Ip4    | :math:`I_{p4}`   | Active power V-I pair (point 4), current                                                 | 12      |        | NumParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  bus    |                  | Retrieved bus idx                                                                        |         |        | ExtParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+
|  gen    |                  | Retrieved StaticGen idx                                                                  |         |        | ExtParam  |            |
+---------+------------------+------------------------------------------------------------------------------------------+---------+--------+-----------+------------+

Variables

+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|   Name   |        Symbol        |                                                                                                                                                                             Initial Value                                                                                                                                                                             |                    Description                     |  Unit  | Properties |
+==========+======================+=======================================================================================================================================================================================================================================================================================================================================================================+====================================================+========+============+
|  s0_y    | :math:`y_{s0}`       | :math:`V`                                                                                                                                                                                                                                                                                                                                                             | State in lag transfer function                     |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  S1_y    | :math:`y_{S_1}`      | :math:`Pe`                                                                                                                                                                                                                                                                                                                                                            | State in lag transfer function                     |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  PIQ_xi  | :math:`xi_{PIQ}`     | :math:`0.0`                                                                                                                                                                                                                                                                                                                                                           | Integrator output                                  |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  s4_y    | :math:`y_{s_4}`      | :math:`\frac{PFsel}{V_{p}}`                                                                                                                                                                                                                                                                                                                                           | State in lag transfer function                     |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  pfilt_y | :math:`y_{P_{filt}}` | :math:`P_{ref}`                                                                                                                                                                                                                                                                                                                                                       | State in lag TF                                    |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  s5_y    | :math:`y_{s5}`       | :math:`P_{sel}`                                                                                                                                                                                                                                                                                                                                                       | State in lag TF                                    |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  PIV_xi  | :math:`xi_{PIV}`     | :math:`0.0`                                                                                                                                                                                                                                                                                                                                                           | Integrator output                                  |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Pord    | :math:`Pord`         |                                                                                                                                                                                                                                                                                                                                                                       | Alias of s5_y                                      |        |            |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  vp      | :math:`V_{p}`        | :math:`V z_{i}^{VLower} + 0.01 z_{l}^{VLower}`                                                                                                                                                                                                                                                                                                                        | Sensed lower-capped voltage                        |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  pfaref  | :math:`\Phi_{ref}`   | :math:`\Phi_{ref0}`                                                                                                                                                                                                                                                                                                                                                   | power factor angle ref                             | *rad*  | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Qcpf    | :math:`Q_{cpf}`      | :math:`Q_{0}`                                                                                                                                                                                                                                                                                                                                                         | Q calculated from P and power factor               | *p.u.* | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Qref    | :math:`Q_{ref}`      | :math:`Q_{0}`                                                                                                                                                                                                                                                                                                                                                         | external Q ref                                     | *p.u.* | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  PFsel   | :math:`PFsel`        | :math:`Q_{cpf} SWPF_{s1} + Q_{ref} SWPF_{s0}`                                                                                                                                                                                                                                                                                                                         | Output of PFFLAG selector                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Qerr    | :math:`Q_{err}`      | :math:`PFsel z_{i}^{PFlim} + Q_{max} z_{u}^{PFlim} + Q_{min} z_{l}^{PFlim} - Qe`                                                                                                                                                                                                                                                                                      | Reactive power error                               |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  PIQ_ys  | :math:`ys_{PIQ}`     | :math:`K_{qp} Q_{err}`                                                                                                                                                                                                                                                                                                                                                | PI summation before limit                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  PIQ_y   | :math:`y_{PIQ}`      | :math:`PIQ_{lim zi} ys_{PIQ} + PIQ_{lim zl} V_{min} + PIQ_{lim zu} V_{max}`                                                                                                                                                                                                                                                                                           | PI output                                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Vsel_x  | :math:`x_{Vsel}`     | :math:`SWV_{s0} V_{ref1} + SWV_{s1} y_{PIQ}`                                                                                                                                                                                                                                                                                                                          | Gain output before limiter                         |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Vsel_y  | :math:`y_{Vsel}`     | :math:`V_{max} Vsel_{lim zu} + V_{min} Vsel_{lim zl} + Vsel_{lim zi} x_{Vsel}`                                                                                                                                                                                                                                                                                        | Gain output after limiter                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Qsel    | :math:`Q_{sel}`      | :math:`SWQ_{s0} y_{s_4} + SWQ_{s1} y_{PIV}`                                                                                                                                                                                                                                                                                                                           | Selection output of QFLAG                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Verr    | :math:`V_{err}`      | :math:`V_{ref0} - y_{s0}`                                                                                                                                                                                                                                                                                                                                             | Voltage error (Vref0)                              |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  dbV_y   | :math:`y_{dbV}`      | :math:`dbV_{db zl} \left(V_{err} - d_{bd1}\right) + dbV_{db zu} \left(V_{err} - d_{bd2}\right)`                                                                                                                                                                                                                                                                       | Deadband type 1 output                             |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Iqinj   | :math:`I_{qinj}`     | :math:`K_{qv} y_{dbV} z_{Vdip} + fThld \left(1 - z_{Vdip}\right) \left(I_{qfrz} p_{Thld} + K_{qv} n_{Thld} y_{dbV}\right)`                                                                                                                                                                                                                                            | Additional Iq signal during under- or over-voltage |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  wg      | :math:`\omega_g`     | :math:`1.0`                                                                                                                                                                                                                                                                                                                                                           | Drive train generator speed                        |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Pref    | :math:`P_{ref}`      | :math:`\frac{P_{0}}{\omega_g}`                                                                                                                                                                                                                                                                                                                                        | external P ref                                     | *p.u.* | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Psel    | :math:`P_{sel}`      | :math:`SWP_{s0} y_{P_{filt}} + SWP_{s1} \omega_g y_{P_{filt}}`                                                                                                                                                                                                                                                                                                        | Output selection of PFLAG                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Ipulim  | :math:`I_{pulim}`    | :math:`\frac{y_{s5}}{V_{p}}`                                                                                                                                                                                                                                                                                                                                          | Unlimited Ipcmd                                    |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  VDL1_y  | :math:`y_{V_{DL1}}`  | :math:`\begin{cases} I_{q1} & \text{for}\: V_{q1} \geq y_{s0} \\I_{q1} + k_{Vq12} \left(- V_{q1} + y_{s0}\right) & \text{for}\: V_{q2} \geq y_{s0} \\I_{q2} + k_{Vq23} \left(- V_{q2} + y_{s0}\right) & \text{for}\: V_{q3} \geq y_{s0} \\I_{q3} + k_{Vq34} \left(- V_{q3} + y_{s0}\right) & \text{for}\: V_{q4} \geq y_{s0} \\I_{q4} & \text{otherwise} \end{cases}` | Output of piecewise                                |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  VDL2_y  | :math:`y_{V_{DL2}}`  | :math:`\begin{cases} I_{p1} & \text{for}\: V_{p1} \geq y_{s0} \\I_{p1} + k_{Vp12} \left(- V_{p1} + y_{s0}\right) & \text{for}\: V_{p2} \geq y_{s0} \\I_{p2} + k_{Vp23} \left(- V_{p2} + y_{s0}\right) & \text{for}\: V_{p3} \geq y_{s0} \\I_{p3} + k_{Vp34} \left(- V_{p3} + y_{s0}\right) & \text{for}\: V_{p4} \geq y_{s0} \\I_{p4} & \text{otherwise} \end{cases}` | Output of piecewise                                |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Ipmax   | :math:`I_{pmax}`     | :math:`\left(1 - fThld_{2}\right) \left(SWPQ_{s0} \left(\begin{cases} 0 & \text{for}\: I_{max}^{2} - Iqcmd_{0}^{2} \leq 0.0 \\\sqrt{I_{max}^{2} - Iqcmd_{0}^{2}} & \text{otherwise} \end{cases}\right) + SWPQ_{s1} \left(z_{VDL2} \left(Imaxr \left(1 - VDL2c\right) + VDL2c y_{V_{DL2}}\right) - 100000000.0 z_{VDL2} + 100000000.0\right)\right)`                   | Upper limit on Ipcmd                               |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Iqmax   | :math:`I_{qmax}`     | :math:`SWPQ_{s0} \left(z_{VDL1} \left(Imaxr \left(1 - VDL1c\right) + VDL1c y_{V_{DL1}}\right) - 100000000.0 z_{VDL1} + 100000000.0\right) + SWPQ_{s1} \left(\begin{cases} 0 & \text{for}\: I_{max}^{2} - Ipcmd_{0}^{2} \leq 0.0 \\\sqrt{I_{max}^{2} - Ipcmd_{0}^{2}} & \text{otherwise} \end{cases}\right)`                                                           | Upper limit on Iqcmd                               |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  PIV_ys  | :math:`ys_{PIV}`     | :math:`K_{vp} \left(- SWV_{s0} y_{s0} + y_{Vsel}\right)`                                                                                                                                                                                                                                                                                                              | PI summation before limit                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  PIV_y   | :math:`y_{PIV}`      | :math:`I_{qmax} PIV_{lim zu} + I_{qmin} PIV_{lim zl} + PIV_{lim zi} ys_{PIV}`                                                                                                                                                                                                                                                                                         | PI output                                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  IpHL_x  | :math:`x_{IpHL}`     | :math:`\frac{y_{s5}}{V_{p}}`                                                                                                                                                                                                                                                                                                                                          | Gain output before limiter                         |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  IpHL_y  | :math:`y_{IpHL}`     | :math:`I_{pmax} IpHL_{lim zu} + I_{pmin} IpHL_{lim zl} + IpHL_{lim zi} x_{IpHL}`                                                                                                                                                                                                                                                                                      | Gain output after limiter                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  IqHL_x  | :math:`x_{IqHL}`     | :math:`I_{qinj} + Q_{sel}`                                                                                                                                                                                                                                                                                                                                            | Gain output before limiter                         |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  IqHL_y  | :math:`y_{IqHL}`     | :math:`I_{qmax} IqHL_{lim zu} + I_{qmin} IqHL_{lim zl} + IqHL_{lim zi} x_{IqHL}`                                                                                                                                                                                                                                                                                      | Gain output after limiter                          |        | v_str      |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  a       | :math:`\theta`       |                                                                                                                                                                                                                                                                                                                                                                       | Bus voltage angle                                  |        |            |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  v       | :math:`V`            |                                                                                                                                                                                                                                                                                                                                                                       | Bus voltage magnitude                              |        |            |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Pe      | :math:`Pe`           |                                                                                                                                                                                                                                                                                                                                                                       | Retrieved Pe of RenGen                             |        |            |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Qe      | :math:`Qe`           |                                                                                                                                                                                                                                                                                                                                                                       | Retrieved Qe of RenGen                             |        |            |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Ipcmd   | :math:`Ipcmd`        |                                                                                                                                                                                                                                                                                                                                                                       | Retrieved Ipcmd of RenGen                          |        |            |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+
|  Iqcmd   | :math:`Iqcmd`        |                                                                                                                                                                                                                                                                                                                                                                       | Retrieved Iqcmd of RenGen                          |        |            |
+----------+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------+--------+------------+

Differential Equations

+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|   Name   |        Symbol        |    Type    |                                      RHS of Equation "T x' = f(x, y)"                                       |     T (LHS)      |
+==========+======================+============+=============================================================================================================+==================+
|  s0_y    | :math:`y_{s0}`       | State      | :math:`V - y_{s0}`                                                                                          | :math:`T_{rv}`   |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|  S1_y    | :math:`y_{S_1}`      | State      | :math:`Pe - y_{S_1}`                                                                                        | :math:`T_p`      |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|  PIQ_xi  | :math:`xi_{PIQ}`     | State      | :math:`K_{qi} \left(1 - z_{Vdip}\right) \left(Q_{err} + 2 y_{PIQ} - 2 ys_{PIQ}\right)`                      |                  |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|  s4_y    | :math:`y_{s_4}`      | State      | :math:`\left(1 - z_{Vdip}\right) \left(\frac{PFsel}{V_{p}} - y_{s_4}\right)`                                | :math:`T_{iq}`   |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|  pfilt_y | :math:`y_{P_{filt}}` | State      | :math:`P_{ref} - y_{P_{filt}}`                                                                              | :math:`0.02`     |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|  s5_y    | :math:`y_{s5}`       | State      | :math:`\left(1 - z_{Vdip}\right) \left(P_{sel} - y_{s5}\right)`                                             | :math:`T_{pord}` |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|  PIV_xi  | :math:`xi_{PIV}`     | State      | :math:`K_{vi} \left(1 - z_{Vdip}\right) \left(- SWV_{s0} y_{s0} + 2 y_{PIV} + y_{Vsel} - 2 ys_{PIV}\right)` |                  |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+
|  Pord    | :math:`Pord`         | AliasState | :math:`0`                                                                                                   |                  |
+----------+----------------------+------------+-------------------------------------------------------------------------------------------------------------+------------------+

Algebraic Equations

+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Name   |       Symbol        |   Type   |                                                                                                                                                                             RHS of Equation "0 = g(x, y)"                                                                                                                                                                             |
+=========+=====================+==========+=======================================================================================================================================================================================================================================================================================================================================================================================+
|  vp     | :math:`V_{p}`       | Algeb    | :math:`V z_{i}^{VLower} - V_{p} + 0.01 z_{l}^{VLower}`                                                                                                                                                                                                                                                                                                                                |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  pfaref | :math:`\Phi_{ref}`  | Algeb    | :math:`\Phi_{ref0} - \Phi_{ref}`                                                                                                                                                                                                                                                                                                                                                      |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Qcpf   | :math:`Q_{cpf}`     | Algeb    | :math:`- Q_{cpf} + y_{S_1} \tan{\left(\Phi_{ref} \right)}`                                                                                                                                                                                                                                                                                                                            |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Qref   | :math:`Q_{ref}`     | Algeb    | :math:`Q_{0} - Q_{ref}`                                                                                                                                                                                                                                                                                                                                                               |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  PFsel  | :math:`PFsel`       | Algeb    | :math:`- PFsel + Q_{cpf} SWPF_{s1} + Q_{ref} SWPF_{s0}`                                                                                                                                                                                                                                                                                                                               |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Qerr   | :math:`Q_{err}`     | Algeb    | :math:`PFsel z_{i}^{PFlim} - Q_{err} + Q_{max} z_{u}^{PFlim} + Q_{min} z_{l}^{PFlim} - Qe`                                                                                                                                                                                                                                                                                            |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  PIQ_ys | :math:`ys_{PIQ}`    | Algeb    | :math:`\left(1 - z_{Vdip}\right) \left(K_{qp} Q_{err} + xi_{PIQ} - ys_{PIQ}\right)`                                                                                                                                                                                                                                                                                                   |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  PIQ_y  | :math:`y_{PIQ}`     | Algeb    | :math:`\left(1 - z_{Vdip}\right) \left(PIQ_{lim zi} ys_{PIQ} + PIQ_{lim zl} V_{min} + PIQ_{lim zu} V_{max} - y_{PIQ}\right)`                                                                                                                                                                                                                                                          |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Vsel_x | :math:`x_{Vsel}`    | Algeb    | :math:`SWV_{s0} V_{ref1} + SWV_{s1} y_{PIQ} - x_{Vsel}`                                                                                                                                                                                                                                                                                                                               |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Vsel_y | :math:`y_{Vsel}`    | Algeb    | :math:`V_{max} Vsel_{lim zu} + V_{min} Vsel_{lim zl} + Vsel_{lim zi} x_{Vsel} - y_{Vsel}`                                                                                                                                                                                                                                                                                             |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Qsel   | :math:`Q_{sel}`     | Algeb    | :math:`- Q_{sel} + SWQ_{s0} y_{s_4} + SWQ_{s1} y_{PIV}`                                                                                                                                                                                                                                                                                                                               |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Verr   | :math:`V_{err}`     | Algeb    | :math:`- V_{err} + V_{ref0} - y_{s0}`                                                                                                                                                                                                                                                                                                                                                 |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  dbV_y  | :math:`y_{dbV}`     | Algeb    | :math:`dbV_{db zl} \left(V_{err} - d_{bd1}\right) + dbV_{db zu} \left(V_{err} - d_{bd2}\right) - y_{dbV}`                                                                                                                                                                                                                                                                             |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Iqinj  | :math:`I_{qinj}`    | Algeb    | :math:`- I_{qinj} + K_{qv} y_{dbV} z_{Vdip} + fThld \left(1 - z_{Vdip}\right) \left(I_{qfrz} p_{Thld} + K_{qv} n_{Thld} y_{dbV}\right)`                                                                                                                                                                                                                                               |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  wg     | :math:`\omega_g`    | Algeb    | :math:`1.0 - \omega_g`                                                                                                                                                                                                                                                                                                                                                                |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Pref   | :math:`P_{ref}`     | Algeb    | :math:`\frac{P_{0}}{\omega_g} - P_{ref}`                                                                                                                                                                                                                                                                                                                                              |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Psel   | :math:`P_{sel}`     | Algeb    | :math:`- P_{sel} + SWP_{s0} y_{P_{filt}} + SWP_{s1} \omega_g y_{P_{filt}}`                                                                                                                                                                                                                                                                                                            |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Ipulim | :math:`I_{pulim}`   | Algeb    | :math:`- I_{pulim} + \frac{y_{s5}}{V_{p}}`                                                                                                                                                                                                                                                                                                                                            |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  VDL1_y | :math:`y_{V_{DL1}}` | Algeb    | :math:`- y_{V_{DL1}} + \begin{cases} I_{q1} & \text{for}\: V_{q1} \geq y_{s0} \\I_{q1} + k_{Vq12} \left(- V_{q1} + y_{s0}\right) & \text{for}\: V_{q2} \geq y_{s0} \\I_{q2} + k_{Vq23} \left(- V_{q2} + y_{s0}\right) & \text{for}\: V_{q3} \geq y_{s0} \\I_{q3} + k_{Vq34} \left(- V_{q3} + y_{s0}\right) & \text{for}\: V_{q4} \geq y_{s0} \\I_{q4} & \text{otherwise} \end{cases}` |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  VDL2_y | :math:`y_{V_{DL2}}` | Algeb    | :math:`- y_{V_{DL2}} + \begin{cases} I_{p1} & \text{for}\: V_{p1} \geq y_{s0} \\I_{p1} + k_{Vp12} \left(- V_{p1} + y_{s0}\right) & \text{for}\: V_{p2} \geq y_{s0} \\I_{p2} + k_{Vp23} \left(- V_{p2} + y_{s0}\right) & \text{for}\: V_{p3} \geq y_{s0} \\I_{p3} + k_{Vp34} \left(- V_{p3} + y_{s0}\right) & \text{for}\: V_{p4} \geq y_{s0} \\I_{p4} & \text{otherwise} \end{cases}` |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Ipmax  | :math:`I_{pmax}`    | Algeb    | :math:`- I_{pmax} + Ipmaxh fThld_{2} + \left(1 - fThld_{2}\right) \left(SWPQ_{s0} \left(\begin{cases} 0 & \text{for}\: I_{max}^{2} - y_{IqHL}^{2} \leq 0.0 \\\sqrt{I_{max}^{2} - y_{IqHL}^{2}} & \text{otherwise} \end{cases}\right) + SWPQ_{s1} \left(z_{VDL2} \left(Imaxr \left(1 - VDL2c\right) + VDL2c y_{V_{DL2}}\right) - 100000000.0 z_{VDL2} + 100000000.0\right)\right)`     |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Iqmax  | :math:`I_{qmax}`    | Algeb    | :math:`- I_{qmax} + SWPQ_{s0} \left(z_{VDL1} \left(Imaxr \left(1 - VDL1c\right) + VDL1c y_{V_{DL1}}\right) - 100000000.0 z_{VDL1} + 100000000.0\right) + SWPQ_{s1} \left(\begin{cases} 0 & \text{for}\: I_{max}^{2} - y_{IpHL}^{2} \leq 0.0 \\\sqrt{I_{max}^{2} - y_{IpHL}^{2}} & \text{otherwise} \end{cases}\right)`                                                                |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  PIV_ys | :math:`ys_{PIV}`    | Algeb    | :math:`\left(1 - z_{Vdip}\right) \left(K_{vp} \left(- SWV_{s0} y_{s0} + y_{Vsel}\right) + xi_{PIV} - ys_{PIV}\right)`                                                                                                                                                                                                                                                                 |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  PIV_y  | :math:`y_{PIV}`     | Algeb    | :math:`\left(1 - z_{Vdip}\right) \left(I_{qmax} PIV_{lim zu} + I_{qmin} PIV_{lim zl} + PIV_{lim zi} ys_{PIV} - y_{PIV}\right)`                                                                                                                                                                                                                                                        |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  IpHL_x | :math:`x_{IpHL}`    | Algeb    | :math:`- x_{IpHL} + \frac{y_{s5}}{V_{p}}`                                                                                                                                                                                                                                                                                                                                             |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  IpHL_y | :math:`y_{IpHL}`    | Algeb    | :math:`I_{pmax} IpHL_{lim zu} + I_{pmin} IpHL_{lim zl} + IpHL_{lim zi} x_{IpHL} - y_{IpHL}`                                                                                                                                                                                                                                                                                           |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  IqHL_x | :math:`x_{IqHL}`    | Algeb    | :math:`I_{qinj} + Q_{sel} - x_{IqHL}`                                                                                                                                                                                                                                                                                                                                                 |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  IqHL_y | :math:`y_{IqHL}`    | Algeb    | :math:`I_{qmax} IqHL_{lim zu} + I_{qmin} IqHL_{lim zl} + IqHL_{lim zi} x_{IqHL} - y_{IqHL}`                                                                                                                                                                                                                                                                                           |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  a      | :math:`\theta`      | ExtAlgeb | :math:`0`                                                                                                                                                                                                                                                                                                                                                                             |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  v      | :math:`V`           | ExtAlgeb | :math:`0`                                                                                                                                                                                                                                                                                                                                                                             |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Pe     | :math:`Pe`          | ExtAlgeb | :math:`0`                                                                                                                                                                                                                                                                                                                                                                             |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Qe     | :math:`Qe`          | ExtAlgeb | :math:`0`                                                                                                                                                                                                                                                                                                                                                                             |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Ipcmd  | :math:`Ipcmd`       | ExtAlgeb | :math:`- Ipcmd_{0} + y_{IpHL}`                                                                                                                                                                                                                                                                                                                                                        |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Iqcmd  | :math:`Iqcmd`       | ExtAlgeb | :math:`- Iqcmd_{0} - y_{IqHL}`                                                                                                                                                                                                                                                                                                                                                        |
+---------+---------------------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Services

+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|   Name    |         Symbol         |                                                                           Equation                                                                           |     Type      |
+===========+========================+==============================================================================================================================================================+===============+
|  Ipcmd0   | :math:`Ipcmd0`         | :math:`\frac{P_{0}}{V}`                                                                                                                                      | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  Iqcmd0   | :math:`Iqcmd0`         | :math:`- \frac{Q_{0}}{V}`                                                                                                                                    | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  pfaref0  | :math:`\Phi_{ref0}`    | :math:`\operatorname{atan}{\left(\frac{Q_{0}}{P_{0}} \right)}`                                                                                               | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  Volt_dip | :math:`z_{Vdip}`       | :math:`1 - Vcmp_{zi}`                                                                                                                                        | VarService    |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  PIQ_flag | :math:`z^{flag}_{PIQ}` | :math:`0`                                                                                                                                                    | EventFlag     |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  s4_flag  | :math:`z^{flag}_{s_4}` | :math:`0`                                                                                                                                                    | EventFlag     |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  pThld    | :math:`p_{Thld}`       | :math:`T_{hld} > 0`                                                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  nThld    | :math:`n_{Thld}`       | :math:`T_{hld} < 0`                                                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  Thld_abs | :math:`|Thld|`         | :math:`\operatorname{abs}{\left(T_{hld} \right)}`                                                                                                            | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  fThld    | :math:`fThld`          | :math:`0`                                                                                                                                                    | ExtendedEvent |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  s5_flag  | :math:`z^{flag}_{s5}`  | :math:`0`                                                                                                                                                    | EventFlag     |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  kVq12    | :math:`k_{Vq12}`       | :math:`\frac{- I_{q1} + I_{q2}}{- V_{q1} + V_{q2}}`                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  kVq23    | :math:`k_{Vq23}`       | :math:`\frac{- I_{q2} + I_{q3}}{- V_{q2} + V_{q3}}`                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  kVq34    | :math:`k_{Vq34}`       | :math:`\frac{- I_{q3} + I_{q4}}{- V_{q3} + V_{q4}}`                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  zVDL1    | :math:`z_{VDL1}`       | :math:`I_{q1} \leq I_{q2} \wedge I_{q2} \leq I_{q3} \wedge I_{q3} \leq I_{q4} \wedge V_{q1} \leq V_{q2} \wedge V_{q2} \leq V_{q3} \wedge V_{q3} \leq V_{q4}` | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  kVp12    | :math:`k_{Vp12}`       | :math:`\frac{- I_{p1} + I_{p2}}{- V_{p1} + V_{p2}}`                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  kVp23    | :math:`k_{Vp23}`       | :math:`\frac{- I_{p2} + I_{p3}}{- V_{p2} + V_{p3}}`                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  kVp34    | :math:`k_{Vp34}`       | :math:`\frac{- I_{p3} + I_{p4}}{- V_{p3} + V_{p4}}`                                                                                                          | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  zVDL2    | :math:`z_{VDL2}`       | :math:`I_{p1} \leq I_{p2} \wedge I_{p2} \leq I_{p3} \wedge I_{p3} \leq I_{p4} \wedge V_{p1} \leq V_{p2} \wedge V_{p2} \leq V_{p3} \wedge V_{p3} \leq V_{p4}` | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  fThld2   | :math:`fThld2`         | :math:`0`                                                                                                                                                    | ExtendedEvent |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  VDL1c    | :math:`VDL1c`          | :math:`y_{V_{DL1}} < Imaxr`                                                                                                                                  | VarService    |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  VDL2c    | :math:`VDL2c`          | :math:`y_{V_{DL2}} < Imaxr`                                                                                                                                  | VarService    |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  Ipmaxh   | :math:`Ipmaxh`         | :math:`0`                                                                                                                                                    | VarHold       |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  Ipmin    | :math:`I_{pmin}`       | :math:`0.0`                                                                                                                                                  | ConstService  |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+
|  PIV_flag | :math:`z^{flag}_{PIV}` | :math:`0`                                                                                                                                                    | EventFlag     |
+-----------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+

Discrete

+------------+------------------------+-------------+-------------------------------+
|    Name    |         Symbol         |    Type     |             Info              |
+============+========================+=============+===============================+
|  SWPF      | :math:`SW_{PF}`        | Switcher    |                               |
+------------+------------------------+-------------+-------------------------------+
|  SWV       | :math:`SW_{V}`         | Switcher    |                               |
+------------+------------------------+-------------+-------------------------------+
|  SWQ       | :math:`SW_{V}`         | Switcher    |                               |
+------------+------------------------+-------------+-------------------------------+
|  SWP       | :math:`SW_{P}`         | Switcher    |                               |
+------------+------------------------+-------------+-------------------------------+
|  SWPQ      | :math:`SW_{PQ}`        | Switcher    |                               |
+------------+------------------------+-------------+-------------------------------+
|  Vcmp      | :math:`V_{cmp}`        | Limiter     | Voltage dip comparator        |
+------------+------------------------+-------------+-------------------------------+
|  VLower    | :math:`VLower`         | Limiter     | Limiter for lower voltage cap |
+------------+------------------------+-------------+-------------------------------+
|  PFlim     | :math:`PFlim`          | Limiter     |                               |
+------------+------------------------+-------------+-------------------------------+
|  PIQ_lim   | :math:`lim_{PIQ}`      | HardLimiter |                               |
+------------+------------------------+-------------+-------------------------------+
|  Vsel_lim  | :math:`lim_{Vsel}`     | HardLimiter |                               |
+------------+------------------------+-------------+-------------------------------+
|  dbV_db    | :math:`db_{dbV}`       | DeadBand    |                               |
+------------+------------------------+-------------+-------------------------------+
|  pfilt_lim | :math:`lim_{P_{filt}}` | RateLimiter | Rate limiter in Lag           |
+------------+------------------------+-------------+-------------------------------+
|  s5_lim    | :math:`lim_{s5}`       | AntiWindup  | Limiter in Lag                |
+------------+------------------------+-------------+-------------------------------+
|  PIV_lim   | :math:`lim_{PIV}`      | HardLimiter |                               |
+------------+------------------------+-------------+-------------------------------+
|  IpHL_lim  | :math:`lim_{IpHL}`     | HardLimiter |                               |
+------------+------------------------+-------------+-------------------------------+
|  IqHL_lim  | :math:`lim_{IqHL}`     | HardLimiter |                               |
+------------+------------------------+-------------+-------------------------------+

Blocks

+--------+------------------+-----------------+-------------------------------------------+
|  Name  |      Symbol      |      Type       |                   Info                    |
+========+==================+=================+===========================================+
|  s0    | :math:`s0`       | Lag             | Voltage filter                            |
+--------+------------------+-----------------+-------------------------------------------+
|  S1    | :math:`S_1`      | Lag             | Pe filter                                 |
+--------+------------------+-----------------+-------------------------------------------+
|  PIQ   | :math:`PIQ`      | PITrackAWFreeze |                                           |
+--------+------------------+-----------------+-------------------------------------------+
|  Vsel  | :math:`Vsel`     | GainLimiter     | Selection output of VFLAG                 |
+--------+------------------+-----------------+-------------------------------------------+
|  s4    | :math:`s_4`      | LagFreeze       | Filter for calculated voltage with freeze |
+--------+------------------+-----------------+-------------------------------------------+
|  dbV   | :math:`dbV`      | DeadBand1       | Deadband for voltage error (ref0)         |
+--------+------------------+-----------------+-------------------------------------------+
|  pfilt | :math:`P_{filt}` | LagRate         | Active power filter with rate limits      |
+--------+------------------+-----------------+-------------------------------------------+
|  s5    | :math:`s5`       | LagAWFreeze     |                                           |
+--------+------------------+-----------------+-------------------------------------------+
|  VDL1  | :math:`V_{DL1}`  | Piecewise       | Piecewise linear characteristics of Vq-Iq |
+--------+------------------+-----------------+-------------------------------------------+
|  VDL2  | :math:`V_{DL2}`  | Piecewise       | Piecewise linear characteristics of Vp-Ip |
+--------+------------------+-----------------+-------------------------------------------+
|  PIV   | :math:`PIV`      | PITrackAWFreeze |                                           |
+--------+------------------+-----------------+-------------------------------------------+
|  IpHL  | :math:`IpHL`     | GainLimiter     |                                           |
+--------+------------------+-----------------+-------------------------------------------+
|  IqHL  | :math:`IqHL`     | GainLimiter     |                                           |
+--------+------------------+-----------------+-------------------------------------------+


Config Fields in [REECA1]

+---------+-------------------+-------+-------------------------------------+-----------------+
| Option  |      Symbol       | Value |                Info                 | Accepted values |
+=========+===================+=======+=====================================+=================+
|  kqs    | :math:`K_{qs}`    | 2     | Q PI controller tracking gain       |                 |
+---------+-------------------+-------+-------------------------------------+-----------------+
|  kvs    | :math:`K_{vs}`    | 2     | Voltage PI controller tracking gain |                 |
+---------+-------------------+-------+-------------------------------------+-----------------+
|  tpfilt | :math:`T_{pfilt}` | 0.020 | Time const. for Pref filter         |                 |
+---------+-------------------+-------+-------------------------------------+-----------------+


