.. _RenGovernor:

================================================================================
RenGovernor
================================================================================

    Renewable turbine governor group.
    

Common Parameters: u, name, ree, w0, Sn, Pe0

Common Variables: Pm, wr0, wt, wg, s3_y

Available models:
WTDTA1_,
WTDS_

.. _WTDTA1:

--------------------------------------------------------------------------------
WTDTA1
--------------------------------------------------------------------------------

Group RenGovernor_


    WTDTA wind turbine drive-train model.

    User-provided reference speed should be specified in parameter `w0`.
    Internally, `w0` is set to the algebraic variable `wr0`.
    
Parameters

+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  Name   |      Symbol       |                Description                | Default |       Unit        |   Type    |   Properties   |
+=========+===================+===========================================+=========+===================+===========+================+
|  idx    |                   | unique device idx                         |         |                   | DataParam |                |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  u      | :math:`u`         | connection status                         | 1       | *bool*            | NumParam  |                |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  name   |                   | device name                               |         |                   | DataParam |                |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  ree    |                   | Renewable exciter idx                     |         |                   | IdxParam  | mandatory      |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  Sn     | :math:`S_n`       | Model MVA base                            | 100     | *MVA*             | NumParam  |                |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  fn     | :math:`f_n`       | nominal frequency                         | 60      | *Hz*              | NumParam  |                |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  Ht     | :math:`H_t`       | Turbine inertia                           | 3       | *MWs/MVA*         | NumParam  | non_zero,power |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  Hg     | :math:`H_g`       | Generator inertia                         | 3       | *MWs/MVA*         | NumParam  | non_zero,power |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  Dshaft | :math:`D_{shaft}` | Damping coefficient                       | 1       | *p.u. (gen base)* | NumParam  | power          |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  Kshaft | :math:`K_{shaft}` | Spring constant                           | 1       | *p.u. (gen base)* | NumParam  | power          |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  w0     | :math:`\omega_0`  | Default speed if not using a torque model | 1       | *p.u.*            | NumParam  |                |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+
|  reg    |                   |                                           | 0       |                   | ExtParam  |                |
+---------+-------------------+-------------------------------------------+---------+-------------------+-----------+----------------+

Variables

+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
| Name  |       Symbol        |                Initial Value                 |      Description       |  Unit  | Properties |
+=======+=====================+==============================================+========================+========+============+
|  s1_y | :math:`y_{s1}`      | :math:`\omega_{r0}`                          | Integrator output      |        | v_str      |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  s2_y | :math:`y_{s2}`      | :math:`\omega_{r0}`                          | Integrator output      |        | v_str      |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  s3_y | :math:`y_{s3}`      | :math:`\frac{P_{e0}}{K_{shaft} \omega_{r0}}` | Integrator output      |        | v_str      |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  wt   | :math:`\omega_t`    |                                              | Alias of s1_y          |        |            |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  wg   | :math:`\omega_g`    |                                              | Alias of s2_y          |        |            |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  wr0  | :math:`\omega_{r0}` | :math:`\omega_0`                             | speed set point        | *p.u.* | v_str      |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  Pm   | :math:`P_{m}`       | :math:`P_{e0}`                               | Mechanical power       |        | v_str      |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  pd   | :math:`P_{d}`       | :math:`0.0`                                  | Output after damping   |        | v_str      |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  wge  | :math:`wge`         |                                              |                        |        |            |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+
|  Pe   | :math:`Pe`          |                                              | Retrieved Pe of RenGen |        |            |
+-------+---------------------+----------------------------------------------+------------------------+--------+------------+

Differential Equations

+-------+------------------+------------+-----------------------------------------------------------------------+--------------+
| Name  |      Symbol      |    Type    |                   RHS of Equation "T x' = f(x, y)"                    |   T (LHS)    |
+=======+==================+============+=======================================================================+==============+
|  s1_y | :math:`y_{s1}`   | State      | :math:`- 1.0 K_{shaft} y_{s3} - 1.0 P_{d} + \frac{1.0 P_{m}}{y_{s1}}` | :math:`2H_t` |
+-------+------------------+------------+-----------------------------------------------------------------------+--------------+
|  s2_y | :math:`y_{s2}`   | State      | :math:`1.0 K_{shaft} y_{s3} + 1.0 P_{d} - \frac{1.0 Pe}{y_{s2}}`      | :math:`2H_g` |
+-------+------------------+------------+-----------------------------------------------------------------------+--------------+
|  s3_y | :math:`y_{s3}`   | State      | :math:`1.0 y_{s1} - 1.0 y_{s2}`                                       | :math:`1.0`  |
+-------+------------------+------------+-----------------------------------------------------------------------+--------------+
|  wt   | :math:`\omega_t` | AliasState | :math:`0`                                                             |              |
+-------+------------------+------------+-----------------------------------------------------------------------+--------------+
|  wg   | :math:`\omega_g` | AliasState | :math:`0`                                                             |              |
+-------+------------------+------------+-----------------------------------------------------------------------+--------------+

Algebraic Equations

+------+---------------------+----------+--------------------------------------------------------+
| Name |       Symbol        |   Type   |             RHS of Equation "0 = g(x, y)"              |
+======+=====================+==========+========================================================+
|  wr0 | :math:`\omega_{r0}` | Algeb    | :math:`\omega_0 - \omega_{r0}`                         |
+------+---------------------+----------+--------------------------------------------------------+
|  Pm  | :math:`P_{m}`       | Algeb    | :math:`- P_{m} + P_{e0}`                               |
+------+---------------------+----------+--------------------------------------------------------+
|  pd  | :math:`P_{d}`       | Algeb    | :math:`D_{shaft} \left(y_{s1} - y_{s2}\right) - P_{d}` |
+------+---------------------+----------+--------------------------------------------------------+
|  wge | :math:`wge`         | ExtAlgeb | :math:`y_{s2} - 1.0`                                   |
+------+---------------------+----------+--------------------------------------------------------+
|  Pe  | :math:`Pe`          | ExtAlgeb | :math:`0`                                              |
+------+---------------------+----------+--------------------------------------------------------+

Services

+------+--------------+-----------------+--------------+
| Name |    Symbol    |    Equation     |     Type     |
+======+==============+=================+==============+
|  Ht2 | :math:`2H_t` | :math:`2 H_{t}` | ConstService |
+------+--------------+-----------------+--------------+
|  Hg2 | :math:`2H_g` | :math:`2 H_{g}` | ConstService |
+------+--------------+-----------------+--------------+

Blocks

+------+------------+------------+------+
| Name |   Symbol   |    Type    | Info |
+======+============+============+======+
|  s1  | :math:`s1` | Integrator |      |
+------+------------+------------+------+
|  s2  | :math:`s2` | Integrator |      |
+------+------------+------------+------+
|  s3  | :math:`s3` | Integrator |      |
+------+------------+------------+------+


.. _WTDS:

--------------------------------------------------------------------------------
WTDS
--------------------------------------------------------------------------------

Group RenGovernor_


    Custom wind turbine model with a single swing-equation.

    This model is used to simulate the mechanical swing
    of the combined machine and turbine mass. The speed output
    is ``s1_y`` which will be fed to ``RenExciter.wg``.

    ``PFLAG`` needs to be set to ``1`` in exciter to consider
    speed for Pref.
    
Parameters

+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
| Name  |      Symbol       |                Description                | Default |   Unit    |   Type    |   Properties   |
+=======+===================+===========================================+=========+===========+===========+================+
|  idx  |                   | unique device idx                         |         |           | DataParam |                |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  u    | :math:`u`         | connection status                         | 1       | *bool*    | NumParam  |                |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  name |                   | device name                               |         |           | DataParam |                |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  ree  |                   | Renewable exciter idx                     |         |           | IdxParam  | mandatory      |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  Sn   | :math:`S_n`       | Model MVA base                            | 100     | *MVA*     | NumParam  |                |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  fn   | :math:`f_n`       | nominal frequency                         | 60      | *Hz*      | NumParam  |                |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  H    | :math:`H_t`       | Total inertia                             | 3       | *MWs/MVA* | NumParam  | non_zero,power |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  D    | :math:`D_{shaft}` | Damping coefficient                       | 1       | *p.u.*    | NumParam  | power          |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  w0   | :math:`\omega_0`  | Default speed if not using a torque model | 1       | *p.u.*    | NumParam  |                |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+
|  reg  |                   |                                           | 0       |           | ExtParam  |                |
+-------+-------------------+-------------------------------------------+---------+-----------+-----------+----------------+

Variables

+-------+---------------------+---------------------+------------------------+--------+------------+
| Name  |       Symbol        |    Initial Value    |      Description       |  Unit  | Properties |
+=======+=====================+=====================+========================+========+============+
|  s1_y | :math:`y_{s1}`      | :math:`\omega_{r0}` | Integrator output      |        | v_str      |
+-------+---------------------+---------------------+------------------------+--------+------------+
|  s3_y | :math:`y_{s3}`      |                     | Dummy state variable   |        |            |
+-------+---------------------+---------------------+------------------------+--------+------------+
|  wt   | :math:`\omega_t`    |                     | Alias of s1_y          |        |            |
+-------+---------------------+---------------------+------------------------+--------+------------+
|  wg   | :math:`\omega_g`    |                     | Alias of s1_y          |        |            |
+-------+---------------------+---------------------+------------------------+--------+------------+
|  Pm   | :math:`P_{m}`       | :math:`P_{e0}`      | Mechanical power       |        | v_str      |
+-------+---------------------+---------------------+------------------------+--------+------------+
|  wr0  | :math:`\omega_{r0}` | :math:`\omega_0`    | speed set point        | *p.u.* | v_str      |
+-------+---------------------+---------------------+------------------------+--------+------------+
|  wge  | :math:`wge`         |                     |                        |        |            |
+-------+---------------------+---------------------+------------------------+--------+------------+
|  Pe   | :math:`Pe`          |                     | Retrieved Pe of RenGen |        |            |
+-------+---------------------+---------------------+------------------------+--------+------------+

Differential Equations

+-------+------------------+------------+-------------------------------------------------------------------------------------------------------+------------+
| Name  |      Symbol      |    Type    |                                   RHS of Equation "T x' = f(x, y)"                                    |  T (LHS)   |
+=======+==================+============+=======================================================================================================+============+
|  s1_y | :math:`y_{s1}`   | State      | :math:`- 1.0 D_{shaft} \left(- \omega_{r0} + y_{s1}\right) + \frac{1.0 \left(P_{m} - Pe\right)}{wge}` | :math:`2H` |
+-------+------------------+------------+-------------------------------------------------------------------------------------------------------+------------+
|  s3_y | :math:`y_{s3}`   | State      | :math:`0`                                                                                             |            |
+-------+------------------+------------+-------------------------------------------------------------------------------------------------------+------------+
|  wt   | :math:`\omega_t` | AliasState | :math:`0`                                                                                             |            |
+-------+------------------+------------+-------------------------------------------------------------------------------------------------------+------------+
|  wg   | :math:`\omega_g` | AliasState | :math:`0`                                                                                             |            |
+-------+------------------+------------+-------------------------------------------------------------------------------------------------------+------------+

Algebraic Equations

+------+---------------------+----------+--------------------------------+
| Name |       Symbol        |   Type   | RHS of Equation "0 = g(x, y)"  |
+======+=====================+==========+================================+
|  Pm  | :math:`P_{m}`       | Algeb    | :math:`- P_{m} + P_{e0}`       |
+------+---------------------+----------+--------------------------------+
|  wr0 | :math:`\omega_{r0}` | Algeb    | :math:`\omega_0 - \omega_{r0}` |
+------+---------------------+----------+--------------------------------+
|  wge | :math:`wge`         | ExtAlgeb | :math:`y_{s1} - 1.0`           |
+------+---------------------+----------+--------------------------------+
|  Pe  | :math:`Pe`          | ExtAlgeb | :math:`0`                      |
+------+---------------------+----------+--------------------------------+

Services

+---------+-------------------+-----------------+--------------+
|  Name   |      Symbol       |    Equation     |     Type     |
+=========+===================+=================+==============+
|  H2     | :math:`2H`        | :math:`2 H_{t}` | ConstService |
+---------+-------------------+-----------------+--------------+
|  Kshaft | :math:`K_{shaft}` | :math:`1.0`     | ConstService |
+---------+-------------------+-----------------+--------------+

Blocks

+------+------------+------------+------+
| Name |   Symbol   |    Type    | Info |
+======+============+============+======+
|  s1  | :math:`s1` | Integrator |      |
+------+------------+------------+------+


