##########################
#######Introduction#######
##########################

# This is an example config file for tiberinus. 
# Lines starting with "#" symbol are comment lines and ignored.
# All arguments here are examples
# Remove '## ' from the lines you want to use

# Legend
# (R) Reqired arguments
# (C) Conditional arguments
# (S) Suggested arguments
# (I) Important

[GENERAL]
# (R) Please enter project name.
project_name = my_project

# (R) Input files. You can enter multiple seperated by space.
# Enter paired files together.
input_files = /path/to/A_R1.fq /path/to/A_R2.fq /path/to/B_R1.fq /path/to/B_R2.fq /path/to/C_R1.fq /path/to/C_R2.fq
input_names = A B C

# (R) Output directory.
# New directory with project name will be created at this location.
output_dir = /foo/bar/

# (C) Directory containing reference genome.
# Reference genome should be process according to tool like aligner.
reference_genome = /foo/bar/referenceGenome

# known SNP
knownSNP = /foo/bar/knownSNP

# known INDEL
knownINDEL = /foo/bar/knownINDEL

# (C) Capture or ROI file for exome or amplicon sequencing.
bed_file = /foo/bar/capture.bed 
# (C) gtf or other annotation file for RNAseq.
## gtf_file = /foo/bar/gencode.gtf

[PIPELINE]

# Tools pipe order. Which order to run tools.

pipeline = fastqc mem SortSam MarkDuplicates BuildBamIndex BaseRecalibrator PrintReads HaplotypeCaller OVA
fastqc = /path/to/fastqc
bwa = /path/to/bwa
picard = /path/to/picard.jar
# GATK needs -T
GATK = /path/to/GenomeAnalysisTK.jar -T
VATK = /path/to/VATK

[fastqc]
tool = ${PIPELINE:fastqc}
input_from = input_files 
args = input_placeholder --outdir=${GENERAL:output_dir}${GENERAL:project_name} --extract
dump_dir = fastQC

[mem]
tool = ${PIPELINE:bwa}
sub_tool = mem
input_from = input_files 
args = -t 12 -R "@RG\tID:name_placeholder\tSM:foo\tPL:illumina\tLB:lib1\tPU:foo" ${GENERAL:reference_genome} input_placeholder > output_placeholder
suffix = _bwa
ext = sam
paired_input = True
names = True
remove = True

[SortSam]
tool = ${PIPELINE:picard}
sub_tool = SortSam
input_from = mem
args = I=input_placeholder O=output_placeholder SORT_ORDER=coordinate
suffix = _picardSort
ext = bam
java = True
remove = True

[MarkDuplicates]
tool = ${PIPELINE:picard}
sub_tool = MarkDuplicates
input_from = SortSam
args = ASSUME_SORTED=True REMOVE_DUPLICATES=True I=input_placeholder O=output_placeholder M=markdup_metrics.txt
suffix = _picardMarkDup
ext = bam
java = True
remove = True

[BuildBamIndex]
tool = ${PIPELINE:picard}
sub_tool = BuildBamIndex
input_from = MarkDuplicates
args = I=input_placeholder O=output_placeholder
ext = bai
java = True
remove = True

[BaseRecalibrator]
tool = ${PIPELINE:GATK}
sub_tool = BaseRecalibrator
input_from = MarkDuplicates
args = -R ${GENERAL:reference_genome} -I input_placeholder -L ${GENERAL:bed_file} -knownSites ${GENERAL:knownSNP} -knownSites ${GENERAL:knownINDEL} -o output_placeholder
paired_output = True
dump_dir = GATKvarcall
suffix = _recal_data
ext = table
java = True
remove = True

[PrintReads]
tool = ${PIPELINE:GATK}
sub_tool = PrintReads
input_from = BaseRecalibrator
paired_input = True
secondary_in_placeholder = True
args = -R ${GENERAL:reference_genome} -I input_placeholder -L ${GENERAL:bed_file} -BQSR secondary_in_placeholder -o output_placeholder
dump_dir = GATKvarcall/bam
suffix = _recal_reads
ext = bam
java = True

[HaplotypeCaller]
tool = ${PIPELINE:GATK}
sub_tool = HaplotypeCaller
input_from = PrintReads
args = -R ${GENERAL:reference_genome} -I input_placeholder -L ${GENERAL:bed_file} --genotyping_mode DISCOVERY -stand_emit_conf 1 -stand_call_conf 20 -o output_placeholder 
dump_dir = GATKvarcall/vcf
suffix = _varcaller
ext = vcf
# TODO add to args -bamout secondary_out_placeholder
secondary_out_placeholder = True
secondary_ext = bam
secondary_suffix = _bamout
secondary_dump_dir = bamout
java = True

[OVA]
tool = ${PIPELINE:VATK}
sub_tool = OVA
input_from = HaplotypeCaller
args = -i input_placeholder -o output_placeholder
dump_dir = GATKvarcall/annotations
suffix = _ensembl_vep
ext = csv
