[tox]
envlist =
   {3.6,3.7,3.8}-unit
   3.6-{lint,staticcheck,doctest,coverage}

[testenv]
basepython =
    3.6: python3.6
    3.7: python3.7
    3.8: python3.8
    system: python

deps = pytest
       hypothesis>=5.10.0,<5.26
       ipdb
       pytest-cov
       doctest: Sphinx>=1.3.4,<1.5
       staticcheck: mypy==0.770
       lint: flake8
       lint: flake8-bugbear

sitepackages = False

whitelist_externals = /usr/bin/make

commands=
   unit: py.test -l []
   staticcheck: mypy -p xotless --config-file {toxinidir}/mypy.ini
   doctest: make -C docs/ doctest
   lint: flake8 xotless
   coverage: py.test -q --doctest-glob='*.rst' --cov=xotless []
