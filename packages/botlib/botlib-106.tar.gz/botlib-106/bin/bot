#!/usr/bin/python3
"botlib - library to program bots"

__version__ = 106

import os, sys
sys.path.insert(0, os.getcwd())
sys.path.insert(0, "lib")

import obj

from csl import Console
from prs import parse_cli
from trm import execute

from bot.irc import IRC

def main():
    obj.wd = os.path.expanduser("~/.losh")
    cfg = parse_cli()
    c = Console()
    c.walk("bot")
    c.walk("botmod")
    if len(sys.argv) >= 2:
       return c.cmd(" ".join(sys.argv[1:]))
    if "s" in cfg.opts:
        c.start()
    i = IRC()
    i.clone(c)
    i.start()
    i.wait()     

execute(main)
os._exit(0)
