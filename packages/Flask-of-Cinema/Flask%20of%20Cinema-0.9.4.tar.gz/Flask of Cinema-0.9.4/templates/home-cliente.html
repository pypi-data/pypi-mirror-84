{% extends "base.html"%}

{% block pagebody %}
<h3>
    Ciao {{current_user.firstName}}!
</h3>

<div class="row">
        <div class="col">
            <div class="card-panel">
                <form action="{{'/client'}}" method="GET" style="display: flex; align-items: center;">
                    <div class="input-field">
                        <input name="date" type="text" class="datepicker">
                        <label for="date">Data<label>
                    </div>
                    <button class="btn waves-effect waves-light" type="submit" style="margin-left: 8px;">Filtra</button>
                </form>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Film disponibili {{date.strftime("%d/%m/%Y")}}</span>                   
                    {% if films and ((films | length) > 0) %}
                    <ul class="collection">
                        {% for film in films %}
                        <li class="collection-item">
                            <h6 style="display: flex; align-items:center;"><div style="flex:1; display:flex; align-items:center"><i class="material-icons">movie</i>&nbsp;{{film.film.name}}</div></h6>
                            <div style="display: flex; align-items:center; flex-wrap: wrap;">
                            {% for show in film.shows %}
                                <div class="film-hours" style="display: flex; align-items:center; flex: 0 0 50%;">
                                    <div style="display: flex; align-items:center"><i class="material-icons">access_time</i>&nbsp;{{show.date.strftime("%H:%M")}}</div>
                                    {% if now < show.date %}
                                    <div style="display:flex; align-items:center; margin-left: 8px;"><a href="/tickets/{{show.id}}"><i class="material-icons">add_shopping_cart</i></a></div>
                                    {% endif %}
                                </div>
                            {% endfor %}
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    {% else %}
                        <div>Oggi non ci sono film proiettati</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>


{% endblock %}